# 📋 إدارة اللوجات الكبيرة - Large Logs Management

## 🎯 الوصف
ميزة جديدة تم إضافتها إلى سكريبت مراقبة السيرفر تتيح لك البحث عن وإدارة اللوجات الكبيرة في السيرفرات.

## 🚀 كيفية الوصول
1. شغل السكريبت: `python3 server_monitoring_script.py`
2. اختر الخيار `17. 📋 Large logs management`

## 🔧 الميزات المتاحة

### 1. 🔍 البحث عن اللوجات الكبيرة
- يبحث في المجلدات التالية:
  - `/home` - لوجات المستخدمين
  - `/var/log` - لوجات النظام
  - `/usr/local/apache/logs` - لوجات Apache
  - `/usr/local/cpanel/logs` - لوجات cPanel
- يمكنك تحديد الحد الأدنى للحجم (افتراضي: 100 ميجابايت)

### 2. 🗑️ حذف اللوجات الكبيرة
- حذف كامل للملفات
- تأكيد قبل الحذف
- تقرير مفصل عن العملية

### 3. 📝 تفريغ اللوجات الكبيرة
- إفراغ محتوى الملف مع الاحتفاظ بالملف
- مفيد عندما تريد الاحتفاظ بالملف ولكن إفراغ المحتوى
- تأكيد قبل العملية

### 4. 📊 عرض ملخص اللوجات
- عرض جميع اللوجات الموجودة في الكاش
- حساب الحجم الإجمالي
- معلومات مفصلة عن كل ملف

### 5. 📋 دليل الأوامر اليدوية (للتنفيذ عبر SSH)
- أوامر SSH للبحث عن اللوجات الكبيرة
- أوامر الحذف والتفريغ
- فحص استخدام القرص
- مواقع اللوجات الشائعة
- نصائح وإرشادات مهمة

## 📋 مثال على الاستخدام

```bash
# 1. البحث عن اللوجات الكبيرة
🔍 Find large log files
Minimum size in MB (default 100): 50

# 2. عرض النتائج
✅ Found 3 large log files

# 3. اختيار العملية
1. 🔍 Find large log files
2. 🗑️  Delete large log files
3. 📝 Truncate large log files (empty content)
4. 📊 Show log files summary
5. 📋 Manual commands guide (for SSH)
0. 🔙 Back to main menu

# 4. حذف أو تفريغ اللوجات
```

## ⚠️ تحذيرات مهمة

1. **تأكيد العمليات**: جميع عمليات الحذف والتفريغ تتطلب تأكيد
2. **النسخ الاحتياطية**: يُنصح بعمل نسخة احتياطية قبل الحذف
3. **الصلاحيات**: تأكد من أن لديك الصلاحيات الكافية
4. **التأثير على الخدمات**: قد يؤثر حذف بعض اللوجات على الخدمات

## 🔍 الأوامر المستخدمة في الخلفية

```bash
# البحث عن الملفات الكبيرة
find /home /var/log /usr/local/apache/logs /usr/local/cpanel/logs -type f -name "*.log" -size +100M -exec ls -lh {} \;

# حذف الملف
rm -f '/path/to/log/file.log'

# تفريغ الملف
cat /dev/null > '/path/to/log/file.log'
```

## 📊 تنسيق النتائج

```
Size        Date                 File Path
----------  --------------------  --------------------------------------------------------------------------------
156M        Aug 24 15:30        /var/log/messages
89M         Aug 24 14:45        /home/user/public_html/error.log
234M        Aug 24 13:20        /usr/local/apache/logs/access_log
--------------------------------------------------------------------------------
Total size: 479.00 MB
```

## 🎯 نصائح للاستخدام

1. **ابدأ بالبحث**: استخدم الخيار 1 أولاً للبحث عن اللوجات
2. **راجع النتائج**: استخدم الخيار 4 لمراجعة اللوجات قبل الحذف
3. **اختر العملية المناسبة**: 
   - استخدم الحذف للملفات غير المهمة
   - استخدم التفريغ للملفات المهمة التي تريد الاحتفاظ بها
4. **راقب المساحة**: تحقق من المساحة المتوفرة بعد العملية

## 🔧 استكشاف الأخطاء

- **خطأ في الوصول**: تأكد من أن السيرفر متصل
- **لا توجد ملفات**: قد لا توجد لوجات بالحجم المحدد
- **خطأ في الحذف**: تحقق من الصلاحيات
- **خطأ في التفريغ**: تأكد من أن الملف قابل للكتابة

## 🔄 التوافق مع WHM API

### WHM API v1 (محدود)
- ✅ البحث عن اللوجات (مع حلول بديلة)
- ❌ لا يدعم أوامر shell مباشرة
- 💡 استخدم الخيار 5 للحصول على دليل SSH

### WHM API v2+ (كامل)
- ✅ جميع الميزات متاحة
- ✅ تنفيذ أوامر shell مباشرة
- ✅ حذف وتفريغ تلقائي

### الحلول البديلة
- **للخوادم التي تستخدم WHM API v1**:
  1. استخدم الخيار 5 لعرض دليل SSH
  2. اتصل بالسيرفر عبر SSH
  3. نفذ الأوامر يدوياً
  4. استخدم `logrotate` لإدارة تلقائية

## 📞 الدعم

إذا واجهت أي مشاكل، راجع:
1. سجلات السكريبت
2. صلاحيات المستخدم
3. حالة الاتصال بالسيرفر
4. إعدادات WHM API
